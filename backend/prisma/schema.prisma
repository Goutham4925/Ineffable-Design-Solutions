generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Service {
  id              String   @id @default(cuid())
  slug            String   @unique
  title           String
  tagline         String
  description     String
  longDescription String?  @db.Text
  features        String[]
  image           String
  accentColor     String
  icon            String
  order           Int      @default(0)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  projects        ProjectService[]
}

model Project {
  id              String   @id @default(cuid())
  slug            String   @unique
  title           String
  client          String
  category        String
  year            String
  description     String
  longDescription String?  @db.Text
  thumbnail       String
  images          String[]
  featured        Boolean  @default(false)
  order           Int      @default(0)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  services        ProjectService[]
  results         ProjectResult[]
  testimonial     ProjectTestimonial?
}

model ProjectService {
  project   Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
  projectId String
  service   Service @relation(fields: [serviceId], references: [id], onDelete: Cascade)
  serviceId String

  @@id([projectId, serviceId])
}

model ProjectResult {
  id        String  @id @default(cuid())
  metric    String
  value     String
  project   Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
  projectId String
}

model ProjectTestimonial {
  id        String  @id @default(cuid())
  quote     String  @db.Text
  author    String
  role      String
  project   Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
  projectId String  @unique
}

model Testimonial {
  id        String   @id @default(cuid())
  quote     String   @db.Text
  author    String
  role      String
  company   String
  avatar    String?
  featured  Boolean  @default(false)
  order     Int      @default(0)
  createdAt DateTime @default(now())
}

model Stat {
  id     String @id @default(cuid())
  label  String
  value  String
  suffix String?
  order  Int    @default(0)
}

model ContactSubmission {
  id        String   @id @default(cuid())
  name      String
  email     String
  company   String?
  phone     String?
  service   String?
  budget    String?
  message   String   @db.Text
  read      Boolean  @default(false)
  createdAt DateTime @default(now())
}

model SiteSettings {
  id        String @id @default("settings")
  email     String
  phone     String
  address   String @db.Text
  socials   Json
  aboutText String @db.Text
  mission   String @db.Text
  vision    String @db.Text
}
